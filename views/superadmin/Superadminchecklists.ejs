<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Favicon icon -->
    <!-- <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon.png"> -->
    <title>
        <%- title %>
    </title>
    <!-- Custom CSS -->
    <link href="assets/libs/flot/css/float-chart.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="dist/css/style.min.css" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
    <link rel="stylesheet" type="text/css" href="assets/extra-libs/multicheck/multicheck.css">
    <link href="assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.css" rel="stylesheet">
    <link href="dist/css/style.min.css" rel="stylesheet">
    <link rel="stylesheet" href="sweetAlert/sweetalert2.min.css">
    <link rel="stylesheet" type="text/css"
        href="assets/libs/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
    <style type="text/css">
        .disableClick {
            pointer-events: none;
        }

        .modal {
            padding: 0 !important;
        }

        .modal .modal-dialog {
            width: 100%;
            max-width: none;
            height: 100%;
            margin: 0;
        }

        .modal .modal-content {
            height: 100%;
            border: 0;
            border-radius: 0;
        }

        .modal .modal-body {
            overflow-y: auto;
        }
		.float_left{
			float:left;
		}
		.form-group{
			width:100%
		}
		.col-md-1{
		  max-width:11%
		}
		.l_10 {
			margin-left: 10px;
		}
		.tbody{
			display:none;
		}
    </style>
</head>

<body>
    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <div id="main-wrapper">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->

        <%- include('../includes/header.ejs') %>
            <%- include('../includes/sidebar.ejs') %>

                <!-- Page wrapper  -->
                <!-- ============================================================== -->
                <div class="page-wrapper">
                    <!-- ============================================================== -->
                    <!-- Bread crumb and right sidebar toggle -->
                    <!-- ============================================================== -->
                    <div class="page-breadcrumb">
                        <div class="row">
                            <div class="col-12 d-flex no-block align-items-center">
                                <h4 class="page-title">
                                    <%- title %>
                                </h4>
                                <div class="ml-auto text-right">
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                                            <li class="breadcrumb-item active" aria-current="page">
                                                <%- title %>
                                            </li>
                                        </ol>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ============================================================== -->
                    <!-- End Bread crumb and right sidebar toggle -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- Container fluid  -->
                    <!-- ============================================================== -->
                    <div class="container-fluid">
                        <!-- ============================================================== -->
                        <!-- Start Page Content -->
                        <!-- ============================================================== -->


                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">

                                    </div>

                                    <div class="col-md-6">
                                        Select Company
                                        <select class="form-select selectboxcss" name="exptype" id="exptype">
                                            <option value="">Select Company</option>
                                            <% getCompanydata.forEach(function(row){ %>
                                                <option value="<%= row.id %>">
                                                    <%= row.name %>
                                                </option>
                                                <% }) %>

                                        </select>
                                    </div>

                                </div>
                                <!-- <button class="btn btn-success" id="create_trailer_button"> Add Trailer <span class="glyphicon glyphicon-edit"></span>   <i style="font-size: 15px;" class="fas fa-plus"></i></button> -->
                                <h5 align="center" class="card-title">
                                    <!-- <%- title %> -->
                                </h5>
                                <div class="table-responsive">
                                    <table id="updateQuestionsDetails" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th style="width:10%">Id</th>
                                                <th style="width:20%">Flatbed Checklists</th>
                                                <th style="width:20%">Dry Van Checklists</th>
                                                <th style="width:20%">Dump Truck Checklists</th>
                                            </tr>
                                        </thead>
										<tbody class="tbody">
											<tr>
												<td class="company_id"></td>
												<td><input type="checkbox" id="flatbed_checklists" onclick="check_list(this)"></td>
												<td><input type="checkbox" id="orientation_Checklists" onclick="check_list(this)"></td>
												<td><input type="checkbox" id="dry_van_checklists" onclick="check_list(this)"><input type="hidden" id="actionData" value="Create"></td>
											</tr>
										</tbody>
                                    </table>
                                </div>

                            </div>
                        </div>

                        <!-- ============================================================== -->
                        <!-- End Page wrapper  -->
                        <!-- ============================================================== -->
                    </div>
                    <!-- ============================================================== -->
                    <!-- End Wrapper -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <%- include('../includes/footer.ejs') %>
                        <script src="assets/extra-libs/multicheck/datatable-checkbox-init.js"></script>
                        <script src="assets/extra-libs/multicheck/jquery.multicheck.js"></script>
                        <script src="assets/extra-libs/DataTables/datatables.min.js"></script>

                        <script src="sweetAlert/sweetalert2.min.js"></script>
</body>
<script>
$(document).ready(function () {
	$('#exptype').on('change', function () {
		let cmpid = this.value;
		$.ajax({
			url: "/Superadmingetchecklists",
			type: "POST",
			data: {cmpid:cmpid },
			success: function (data) {
			console.info(data);
				$('#actionData').val('Create');
				$('#flatbed_checklists').prop('checked', false);
				$('#orientation_Checklists').prop('checked', false);
				$('#dry_van_checklists').prop('checked', false);
				if (data.status) {
					$('#actionData').val('Update');
					if(data.data.flatbed_checklists==1)
						$('#flatbed_checklists').prop('checked', true);
					if(data.data.orientation_Checklists==1)	
						$('#orientation_Checklists').prop('checked', true);
					if(data.data.dry_van_checklists==1)
						$('#dry_van_checklists').prop('checked', true);
				}
			}
		});
		$('.company_id').html(cmpid);
		$('.tbody').show();
	});
});
function check_list(attr){
	let cmpid = $('#exptype').val();
	let flatbed_checklists = orientation_Checklists = dry_van_checklists = 0;
	let actionData = $('#actionData').val();
	if($('#flatbed_checklists').is(":checked")){
		flatbed_checklists = 1;
	}
	if($('#orientation_Checklists').is(":checked")){
		orientation_Checklists = 1;
	}
	if($('#dry_van_checklists').is(":checked")){
		dry_van_checklists = 1;
	}
	$.ajax({
		url: "/Superadminaddchecklists",
		type: "POST",
		data: { flatbed_checklists: flatbed_checklists,orientation_Checklists: orientation_Checklists,dry_van_checklists: dry_van_checklists,company_id:cmpid,actionData:actionData },
		success: function (data) {
			$('#actionData').val('Update');
		}
	});
}
</script>
</html>