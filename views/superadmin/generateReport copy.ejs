<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Favicon icon -->
    <!-- <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon.png"> -->
    <title>
        <%- title %>
    </title>
    <!-- Custom CSS -->
    <link href="assets/libs/flot/css/float-chart.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="dist/css/style.min.css" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
    <link rel="stylesheet" type="text/css" href="assets/extra-libs/multicheck/multicheck.css">
    <link href="assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.css" rel="stylesheet">
    <link href="dist/css/style.min.css" rel="stylesheet">
    <link rel="stylesheet" href="sweetAlert/sweetalert2.min.css">
    <link rel="stylesheet" type="text/css"
        href="assets/libs/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
    <style type="text/css">
        .disableClick {
            pointer-events: none;
        }

        .modal {
            padding: 0 !important;
        }

        .modal .modal-dialog {
            width: 100%;
            max-width: none;
            height: 100%;
            margin: 0;
        }

        .modal .modal-content {
            height: 100%;
            border: 0;
            border-radius: 0;
        }

        .modal .modal-body {
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <div id="main-wrapper">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->

        <%- include('../includes/header.ejs') %>
            <%- include('../includes/sidebar.ejs') %>

                <!-- Page wrapper  -->
                <!-- ============================================================== -->
                <div class="page-wrapper">
                    <!-- ============================================================== -->
                    <!-- Bread crumb and right sidebar toggle -->
                    <!-- ============================================================== -->
                    <div class="page-breadcrumb">
                        <div class="row">
                            <div class="col-12 d-flex no-block align-items-center">
                                <h4 class="page-title">
                                    <%- title %>
                                </h4>
                                <div class="ml-auto text-right">
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                                            <li class="breadcrumb-item active" aria-current="page">
                                                <%- title %>
                                            </li>
                                        </ol>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ============================================================== -->
                    <!-- End Bread crumb and right sidebar toggle -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- Container fluid  -->
                    <!-- ============================================================== -->
                    <div class="container-fluid">
                        <!-- ============================================================== -->
                        <!-- Start Page Content -->
                        <!-- ============================================================== -->

                        <span class="btn btn-primary" id="exportPDF" href="">Export PDF
                            <span class="glyphicon glyphicon-edit"></span><i style="font-size: 15px;"
                                class="fas fa-search"></i></span>


                        <a class="btn btn-primary" target="_blank" id="hosAttachment" href="">View Attachment <span
                                class="glyphicon glyphicon-edit"></span><i style="font-size: 15px;"
                                class="fas fa-search"></i></a>





                        <div id="editmodalhos" class="modal fade" tabindex="-1" role="dialog"
                            aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static"
                            data-keyboard="false">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-md-2">
                                            </div>
                                            <div class="col-md-8">
                                                <!-- <h3 align="center" class="card-title">Edit Hos</h3> -->
                                                <div class="card-body">
                                                    <form class="form-horizontal" id="updateHosdata"
                                                        style="background: #27a9e324;border-radius: 35px;">
                                                        <div class="card-body" id="updateHosdata_details">
                                                            <br>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <input type="hidden" name="id" id="id">


                                                                    <div class="form-group row">
                                                                        <label for="duration"
                                                                            class="col-sm-3 control-label col-form-label">
                                                                            duration</label>
                                                                        <div class="col-md-9">
                                                                            <input type="text" class="form-control"
                                                                                name="duration" value="" id="duration">
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="form-group row">
                                                                        <label for="actualDate"
                                                                            class="col-sm-3 control-label col-form-label">actualDate</label>
                                                                        <div class="col-md-9">
                                                                            <input type="date" class="form-control"
                                                                                name="actualDate" value=""
                                                                                id="actualDate">
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="border-top">
                                                            <div style="text-align: center;" class="card-body">
                                                                <button type="Submit" id="submitBtn"
                                                                    class="btn btn-primary">Update</button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div id="addmodaladdress" class="modal fade" tabindex="-1" role="dialog"
                            aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static"
                            data-keyboard="false">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-md-2">
                                            </div>
                                            <div class="col-md-8">
                                                <h3 align="center" class="card-title">Add Employement history</h3>
                                                <div class="card-body">
                                                    <form class="form-horizontal" id="addAddress"
                                                        style="background: #27a9e324;border-radius: 35px;">
                                                        <div class="card-body" id="addAddress_details">
                                                            <br>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <input type="hidden" id="id">
                                                                    <input type="hidden" id="company_id"
                                                                        name="company_id">
                                                                    <input type="hidden" id="driverId" name="driverId">
                                                                    <div class="form-group row">
                                                                        <label for="driverAddress"
                                                                            class="col-sm-3 control-label col-form-label">Driver
                                                                            Address</label>
                                                                        <div class="col-md-9">
                                                                            <input type="text" class="form-control"
                                                                                name="driverAddress" value=""
                                                                                id="driverAddress">
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="form-group row">
                                                                        <label for="driverCity"
                                                                            class="col-sm-3 control-label col-form-label">City</label>
                                                                        <div class="col-md-9">
                                                                            <input type="text" class="form-control"
                                                                                name="driverCity" value=""
                                                                                id="driverCity">
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="form-group row">
                                                                        <label for="driverState"
                                                                            class="col-sm-3 control-label col-form-label">Driver
                                                                            State</label>
                                                                        <div class="col-md-9">
                                                                            <input type="text" class="form-control"
                                                                                name="driverState" value=""
                                                                                id="driverState">
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="form-group row">
                                                                        <label for="driverCountry"
                                                                            class="col-sm-3 control-label col-form-label">Driver
                                                                            Country</label>
                                                                        <div class="col-md-9">
                                                                            <input type="text" class="form-control"
                                                                                name="driverCountry" value=""
                                                                                id="driverCountry">
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="form-group row">
                                                                        <label for="driverProvince"
                                                                            class="col-sm-3 control-label col-form-label">Driver
                                                                            Province</label>
                                                                        <div class="col-md-9">
                                                                            <input type="text" class="form-control"
                                                                                name="driverProvince" value=""
                                                                                id="driverProvince">
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="form-group row">
                                                                        <label for="driverPostalCode"
                                                                            class="col-sm-3 control-label col-form-label">Driver
                                                                            PostalCode</label>
                                                                        <div class="col-md-9">
                                                                            <input type="text" class="form-control"
                                                                                name="driverPostalCode" value=""
                                                                                id="driverPostalCode">
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="form-group row">
                                                                        <label for="DriverPostalCode"
                                                                            class="col-sm-3 control-label col-form-label">From
                                                                            Date</label>
                                                                        <div class="col-md-9">
                                                                            <input type="date" readonly
                                                                                class="form-control" id="fromDate"
                                                                                name="driverFromDate">
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label for=""
                                                                            class="col-sm-3 control-label col-form-label">To
                                                                            Date</label>
                                                                        <div class="col-md-9">
                                                                            <input type="date" readonly
                                                                                class="form-control" name="driverToDate"
                                                                                id="toDate">
                                                                        </div>
                                                                    </div>



                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="border-top">
                                                            <div style="text-align: center;" class="card-body">
                                                                <button type="Submit" id="submitBtn"
                                                                    class="btn btn-primary">Add</button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="viewmodaladdress" class="modal fade" tabindex="-1" role="dialog"
                            aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static"
                            data-keyboard="false">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <h3 align="center" class="card-title">View Address</h3>
                                        <div class="card-body">

                                            <h5 align="center" class="card-title">
                                                <i class="mdi mdi-alarm-check"></i>
                                                <%- title %>
                                            </h5>
                                            <div class="table-responsive">

                                                <table id="table" class="table table-striped table-bordered">
                                                    <thead>
                                                        <tr>
                                                            <!-- <th>Id</th> -->
                                                            <th class="thClass">Address</th>
                                                            <th class="thClass">State</th>
                                                            <th class="thClass">City</th>
                                                            <th class="thClass">Country</th>
                                                            <th class="thClass">Province</th>
                                                            <th class="thClass">PostalCode</th>
                                                            <th class="thClass">From</th>
                                                            <th class="thClass">To</th>
                                                            <th class="thClass">Add</th>
                                                            <th class="thClass">Gap</th>
                                                            <th class="thClass">Edit</th>
                                                            <th class="thClass">Delete</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <!-- <span id="tableDtls"></span> -->


                                                    </tbody>
                                                </table>
                                            </div>





                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">

                                    </div>

                                    <div class="col-md-6">
                                        Select Company
                                        <select class="form-select selectboxcss" name="exptype" id="exptype">
                                            <option value="">Select Company</option>
                                            <% getCompanydata.forEach(function(row){ %>
                                                <option value="<%= row.id %>">
                                                    <%= row.name %>
                                                </option>
                                                <% }) %>

                                        </select>
                                    </div>

                                </div>
                                <!-- <button class="btn btn-success" id="create_trailer_button"> Add Trailer <span class="glyphicon glyphicon-edit"></span>   <i style="font-size: 15px;" class="fas fa-plus"></i></button> -->
                                <h5 align="center" class="card-title">
                                    <i style="font-size: 40px;" class="mdi mdi-clock-fast"></i>
                                    <br>
                                    <%- title %>
                                </h5>
                                <hr>
                                <div class="table-responsive">
                                    <table id="updateDriverDetails" class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Id</th>
                                                <th>First Name</th>
                                                <th>Company ID</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>

                                    </table>
                                </div>

                            </div>
                        </div>


                        <!-- view modal -->
                    </div>

                    <!-- edit modal -->




                    <!-- ============================================================== -->
                    <!-- End Page wrapper  -->
                    <!-- ============================================================== -->
                </div>
                <!-- ============================================================== -->
                <!-- End Wrapper -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <%- include('../includes/footer.ejs') %>
                    <script src="assets/extra-libs/multicheck/datatable-checkbox-init.js"></script>
                    <script src="assets/extra-libs/multicheck/jquery.multicheck.js"></script>
                    <script src="assets/extra-libs/DataTables/datatables.min.js"></script>

                    <script src="assets/libs/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
                    <script>



                        /****************************************
                         *       Basic Table                   *
                         ****************************************/
                        // $('#zero_config').DataTable();

                        $(document).ready(function () {



                            let date = new Date();
                            var currentdate =
                                ("00" + (date.getMonth() + 1)).slice(-2) + "/" +
                                ("00" + date.getDate()).slice(-2) + "/" +
                                date.getFullYear();
                            function calculateAge(birthDate, otherDate) {
                                birthDate = new Date(birthDate);
                                otherDate = new Date(otherDate);

                                var years = (otherDate.getFullYear() - birthDate.getFullYear());

                                if (otherDate.getMonth() < birthDate.getMonth() ||
                                    otherDate.getMonth() == birthDate.getMonth() && otherDate.getDate() < birthDate.getDate()) {
                                    years--;
                                }

                                return years;
                            }

                            $("#create_trailer_button").hide()

                            $("#create_trailer_button").click(function () {
                                $('body #module_content_modal').modal('show');
                            });

                            $('#exptype').on('change', function () {
                                let cmpid = this.value;
                                // alert(cmpid)
                                $('body #create_trailer #company_id').val(cmpid);
                                $("#create_trailer_button").show()

                                $("#updateDriverDetails").dataTable().fnDestroy();

                                let customer = $('#updateDriverDetails').DataTable({
                                    processing: true,
                                    serverSide: true,
                                    order: [[0, 'ASC']],
                                    lengthMenu: [[10, 50, 100, 250, 500, 1000], [10, 50, 100, 250, 500, 1000]],
                                    pageLength: 10,
                                    searching: true,
                                    ajax: {
                                        url: "/gethosSuperadmin",
                                        data: function (data) {
                                            data.cmpid = cmpid
                                            // data.search_key = $("#searchKey").val(),
                                            // data.search_val = $("#searchVal").val()
                                        },
                                        type: "GET",
                                    },
                                    columns: [
                                        { "data": "slno" },
                                        { "data": "firstName" },
                                        { "data": "company_id" },
                                        { "data": "action" }
                                    ],
                                    select: true
                                });
                                $("#editmodalid").text('Export PDF');

                            });
                        });



                        $(document).on('click', '#deletedriverDtls', function () {
                            let id = $(this).attr('data-id');

                            // alert(id)
                            Swal.fire({
                                title: 'Are you sure?',
                                text: "You won't be able to revert this!",
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Yes, delete it!'
                            }).then((result) => {
                                if (result.isConfirmed) {


                                    $.ajax({
                                        url: "/superadmindeleteDriverDetails",
                                        type: "POST",
                                        data: { id: id },
                                        success: function (data) {
                                            if (data.status) {
                                                const Toast = Swal.mixin({
                                                    toast: true,
                                                    position: 'top-end',
                                                    showConfirmButton: false,
                                                    timer: 2000,
                                                    timerProgressBar: true,
                                                    didOpen: (toast) => {
                                                        toast.addEventListener('mouseenter', Swal.stopTimer)
                                                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                                                    }
                                                })
                                                Toast.fire({
                                                    icon: 'success',
                                                    title: data.message
                                                }); setTimeout(function () {
                                                    window.location.reload();
                                                }, 2000);
                                            } else {
                                                Swal.fire({
                                                    title: 'Error!',
                                                    text: 'Something went wrong',
                                                    icon: 'error',
                                                    confirmButtonText: 'Cool'
                                                })
                                            }

                                        }
                                    });


                                }
                            })
                        });


                        function convertToBase64(inputfile, parms) {
                            //Read File
                            // alert(inputfile)
                            // alert(parms)

                            var selectedFile = document.getElementById(inputfile).files;
                            console.log(selectedFile);
                            //Check File is not Empty
                            if (selectedFile.length > 0) {
                                // Select the very first file from list
                                var fileToLoad = selectedFile[0];
                                var filesize = selectedFile[0].size;
                                if (filesize <= '2069405') {
                                    console.log(filesize);
                                    // FileReader function for read the file.
                                    var fileReader = new FileReader();
                                    var base64;
                                    // Onload of file read the file content
                                    fileReader.onload = function (fileLoadedEvent) {
                                        base64 = fileLoadedEvent.target.result;
                                        // Print data in console
                                        console.log(parms);
                                        $("#" + parms).val(base64);
                                        var div = document.getElementById(parms);
                                        div.innerHTML += base64;

                                    };
                                    // Convert data to base64
                                    fileReader.readAsDataURL(fileToLoad);
                                } else {
                                    Swal.fire(
                                        'Too Big!',
                                        'Upload image size within 2 MB.',
                                        'danger'
                                    )
                                    return false;
                                }
                            }
                        }
                        $("#hosAttachment").hide();
                        $(document).on('click', '#exportPDF', function () {

                            // let id = $('body #updateDriver_details #driverId').val();
                            let id = 11;

                            // alert(id)
                            // Swal.fire({
                            //     title: 'Are you sure?',
                            //     text: "You want to approve this!",
                            //     icon: 'warning',
                            //     showCancelButton: true,
                            //     confirmButtonColor: '#3085d6',
                            //     cancelButtonColor: '#d33',
                            //     confirmButtonText: 'Yes, approve it!'
                            // }).then((result) => {
                            // if (result.isConfirmed) {
                                

                            $.ajax({
                                url: "/hosReportpdf",
                                type: "GET",
                                data: { id: id },
                                success: function (data) {
                                    if (data.status) {
                                        $("#hosAttachment").show();
                                        if (data.fileName != "") {
                                            // alert(data.fileName)
                                            let currentAttachment = 'uploads/attachment/' + data.fileName+'.pdf';
                                            $("#hosAttachment").attr("href", currentAttachment);
                                        } else {
                                            $("#hosAttachment").hide();
                                        }

                                    } else {
                                        Swal.fire({
                                            title: 'Error!',
                                            text: 'Something went wrong',
                                            icon: 'error',
                                            confirmButtonText: 'Cool'
                                        })
                                    }

                                }
                            });


                            // }
                            // })
                        });

                        $("#updateDriver").submit(function (event) {
                            event.preventDefault();

                            var values = {};
                            $.each($('#updateDriver').serializeArray(), function (i, field) {
                                values[field.name] = field.value;
                                // console.log(values[field.name]);
                            });
                            Swal.fire({
                                title: 'Are you sure?',
                                text: "You want to update this!",
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Yes, update it!'
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    $("#submitBtn").text('Please wait');
                                    $("#submitBtn").attr('disabled', true);
                                    $.ajax({
                                        url: "/updateDriverDetails",
                                        type: "POST",
                                        data: values,
                                        // data: {id: getValue("id"),name:getValue("name")},
                                        // data: {id: getValue("id"),name:getValue("name")},
                                        // data:{id : values.id,name : values.name,username : values.username,password : values.password,management_name : values.management_name,phone : values.phone,email : values.email,safety_coordinator : values.safety_coordinator,safety_coordinator_phone : values.safety_coordinator_phone,cvor : values.cvor,cvor_expiry : values.cvor_expiry,mc_number : values.mc_number,mc_pin : values.mc_pin,usdot : values.usdot,fmcsa : values.fmcsa,ky : values.ky,nm : values.nm,ny : values.ny,fein : values.fein,ezee : values.ezee,ifta : values.ifta,business_identificaton : values.business_identificaton,mvid : values.mvid,sunpass : values.sunpass,pre_pass : values.pre_pass,best_pass : values.best_pass,scac : values.scac,carrier_code : values.carrier_code,irp_accountno : values.irp_accountno,irp_renewal : values.irp_renewal,svi_number : values.svi_number,insurance_company : values.insurance_company,broker_detail : values.broker_detail,policy_number : values.policy_number,exp_date : values.exp_date,drug_alcohol : values.drug_alcohol,psp_account : values.psp_account,ctpat : values.ctpat,ctpat_password : values.ctpat_password,smartway : values.smartway,pip : values.pip,us_canadian_bond : values.us_canadian_bond,wsib_account : values.wsib_account,eld_username : values.eld_username,eld_password : values.eld_password,fuel_company_name : values.fuel_company_name,fuel_company_username : values.fuel_company_username,fuel_company_password :fvalues.uel_company_password,ace_username : values.ace_username,ace_password : values.ace_password,hazmat : values.hazmat,hazmat_exp : values.hazmat_exp,dashcam_username : values.dashcam_username,dashcam_password : values.dashcam_password,trailer_trackers : values.trailer_trackers,trailer_password : values.trailer_password},
                                        // data:{id : values.id,name : values.name,username : values.username,password : values.password,
                                        //     management_name : values.management_name,phone : values.phone,email : values.email,safety_coordinator : values.safety_coordinator,safety_coordinator_phone : values.safety_coordinator_phone,cvor : values.cvor,cvor_expiry : values.cvor_expiry,mc_number : values.mc_number,
                                        //     mc_pin : values.mc_pin,usdot : values.usdot,fmcsa : values.fmcsa,ky : values.ky,
                                        //     nm : values.nm,ny : values.ny,fein : values.fein,ezee : values.ezee,ifta : values.ifta,business_identificaton : values.business_identificaton,mvid : values.mvid,sunpass : values.sunpass,pre_pass : values.pre_pass,best_pass : values.best_pass,scac : values.scac,carrier_code : values.carrier_code,irp_accountno : values.irp_accountno,irp_renewal : values.irp_renewal,svi_number : values.svi_number,insurance_company : values.insurance_company,broker_detail : values.broker_detail,policy_number : values.policy_number,exp_date : values.exp_date,drug_alcohol : values.drug_alcohol,psp_account : values.psp_account,ctpat : values.ctpat,ctpat_password : values.ctpat_password,smartway : values.smartway,pip : values.pip,us_canadian_bond : values.us_canadian_bond,wsib_account : values.wsib_account,eld_username : values.eld_username,eld_password : values.eld_password,fuel_company_name : values.fuel_company_name,fuel_company_username : values.fuel_company_username,fuel_company_password :values.fuel_company_password,ace_username : values.ace_username,ace_password : values.ace_password,hazmat : values.hazmat,hazmat_exp : values.hazmat_exp,dashcam_username : values.dashcam_username,dashcam_password : values.dashcam_password,trailer_trackers : values.trailer_trackers,trailer_password : values.trailer_password},
                                        success: function (data) {
                                            if (data.status) {
                                                const Toast = Swal.mixin({
                                                    toast: true,
                                                    position: 'top-end',
                                                    showConfirmButton: false,
                                                    timer: 2000,
                                                    timerProgressBar: true,
                                                    didOpen: (toast) => {
                                                        toast.addEventListener('mouseenter', Swal.stopTimer)
                                                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                                                    }
                                                })
                                                Toast.fire({
                                                    icon: 'success',
                                                    title: data.message
                                                });
                                                setTimeout(function () {
                                                    window.location.reload();
                                                }, 2000);
                                            } else {
                                                Swal.fire({
                                                    title: 'Error!',
                                                    text: 'Something went wrong',
                                                    icon: 'error',
                                                    confirmButtonText: 'Cool'
                                                })
                                            }

                                        }
                                    });


                                }
                            })
                        });

                        $("#updateHosdata").submit(function (event) {
                            event.preventDefault();
                            var values = {};
                            $.each($('#updateHosdata').serializeArray(), function (i, field) {
                                values[field.name] = field.value;
                                // console.log(values[field.name]);
                            });
                            Swal.fire({
                                title: 'Are you sure?',
                                text: "You want to update this!",
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Yes, update it!'
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    $("#submitBtn").text('Please wait');
                                    $("#submitBtn").attr('disabled', true);
                                    $.ajax({
                                        url: "/updatehosByID",
                                        type: "POST",
                                        data: values,
                                        success: function (data) {
                                            if (data.status) {
                                                const Toast = Swal.mixin({
                                                    toast: true,
                                                    position: 'top-end',
                                                    showConfirmButton: false,
                                                    timer: 2000,
                                                    timerProgressBar: true,
                                                    didOpen: (toast) => {
                                                        toast.addEventListener('mouseenter', Swal.stopTimer)
                                                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                                                    }
                                                })
                                                Toast.fire({
                                                    icon: 'success',
                                                    title: data.message
                                                });
                                                setTimeout(function () {
                                                    window.location.reload();
                                                }, 2000);
                                            } else {
                                                Swal.fire({
                                                    title: 'Error!',
                                                    text: 'Something went wrong',
                                                    icon: 'error',
                                                    confirmButtonText: 'Cool'
                                                })
                                            }

                                        }
                                    });


                                }
                            })
                        });



                    </script>
                    <script src="sweetAlert/sweetalert2.min.js"></script>
                    <script src="dist/js/timeZonescript.js"></script>
                    <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.1/moment.min.js'></script>
                    <script
                        src='https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.3/moment-timezone-with-data.min.js'></script>
                    <!-- <script src="./script.js"></script> -->
                    <script>

                        function onCountryChange() {
                            var countryCode = $("body #updateDriver_details #eventsCalCountry").val();
                            var eventsCalTimezoneHidden = $("body #updateDriver_details #eventsCalTimezoneHidden").val();
                            if (eventsCalTimezoneHidden != "") {
                                var eventsCalTimezoneData = $("body #updateDriver_details #eventsCalTimezone").val();
                                for (var i in timezone_json[countryCode]) {
                                    var timezoneObj = timezone_json[countryCode][i];
                                    var now = moment(new Date())
                                    $("body #updateDriver_details #eventsCalTimezone").append("<option value='" + timezoneObj.tzid + "'>" + "(UTC" + moment.tz(now, timezoneObj.tzid).format('Z') + ") " + timezoneObj.name)
                                }
                            }
                            else {
                                $("body #updateDriver_details #eventsCalTimezone").empty();
                                var eventsCalTimezoneData = $("body #updateDriver_details #eventsCalTimezone").val();
                                for (var i in timezone_json[countryCode]) {
                                    var timezoneObj = timezone_json[countryCode][i];
                                    var now = moment(new Date())
                                    $("body #updateDriver_details #eventsCalTimezone").append("<option value='" + timezoneObj.tzid + "'>" + "(UTC" + moment.tz(now, timezoneObj.tzid).format('Z') + ") " + timezoneObj.name)
                                }

                            }
                        }

                        $(document).ready(function () {
                            $("body #updateDriver_details #eventsCalCountry").change(onCountryChange);
                            //   $("#eventsCalCountry").val("US");
                            onCountryChange();

                        })
                    </script>
</body>

</html>